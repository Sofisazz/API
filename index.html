<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ - REST API</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f4f4f4;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .api-config {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .api-config h2 {
            color: #667eea;
            margin-bottom: 1rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #555;
        }

        input,
        textarea,
        select,
        button {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .crud-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        @media (max-width: 768px) {
            .crud-section {
                grid-template-columns: 1fr;
            }
        }

        .form-section,
        .results-section {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .form-section h2,
        .results-section h2 {
            color: #667eea;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #f0f0f0;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .btn-get {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        }

        .btn-post {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
        }

        .btn-put {
            background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
        }

        .btn-delete {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
        }

        .response-area {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 1rem;
            margin-top: 1rem;
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
        }

        .supplier-list {
            margin-top: 1rem;
        }

        .supplier-item {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 1rem;
            margin-bottom: 0.5rem;
            transition: background-color 0.3s;
        }

        .supplier-item:hover {
            background: #e9ecef;
        }

        .supplier-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .supplier-name {
            font-weight: bold;
            color: #667eea;
        }

        .supplier-contact {
            color: #666;
            font-size: 0.9rem;
        }

        .status {
            padding: 0.25rem 0.5rem;
            border-radius: 3px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .status-success {
            background: #d4edda;
            color: #155724;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
        }

        .status-warning {
            background: #fff3cd;
            color: #856404;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏</h1>
            <p class="subtitle">REST API –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π</p>
        </header>

        <section class="api-config">
            <h2>üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API</h2>
            <!-- –í —Å–µ–∫—Ü–∏–∏ api-config –∑–∞–º–µ–Ω–∏—Ç–µ input –ø–æ–ª—è -->
            <div class="form-group">
                <label for="apiBaseUrl">–ë–∞–∑–æ–≤—ã–π URL API:</label>
                <input type="text" id="apiBaseUrl" value="http://localhost/3"
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –±–∞–∑–æ–≤—ã–π URL –≤–∞—à–µ–≥–æ API">
            </div>
            <div class="form-group">
                <label for="apiKey">API –∫–ª—é—á:</label>
                <input type="text" id="apiKey" value="test_key_12345" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à API –∫–ª—é—á">
            </div>
            <button onclick="testConnection()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</button>
        </section>

        <section class="crud-section">
            <div class="form-section">
                <h2>üõ†Ô∏è –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏</h2>

                <div class="form-group">
                    <label for="supplierId">ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (–¥–ª—è GET, PUT, DELETE):</label>
                    <input type="number" id="supplierId" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞">
                </div>

                <div class="form-group">
                    <label for="companyName">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏:</label>
                    <input type="text" id="companyName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏">
                </div>

                <div class="form-group">
                    <label for="contactName">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ:</label>
                    <input type="text" id="contactName" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ">
                </div>

                <div class="form-group">
                    <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                    <input type="text" id="phone" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω">
                </div>

                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" placeholder="–í–≤–µ–¥–∏—Ç–µ email">
                </div>

                <div class="action-buttons">
                    <button class="btn-get" onclick="getAllSuppliers()">üìã –í—Å–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏ (GET)</button>
                    <button class="btn-get" onclick="getSupplier()">üëÄ –ü–æ–ª—É—á–∏—Ç—å –ø–æ ID (GET)</button>
                    <button class="btn-post" onclick="createSupplier()">‚ûï –°–æ–∑–¥–∞—Ç—å (POST)</button>
                    <button class="btn-put" onclick="updateSupplier()">‚úèÔ∏è –û–±–Ω–æ–≤–∏—Ç—å (PUT)</button>
                    <button class="btn-delete" onclick="deleteSupplier()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å (DELETE)</button>
                </div>
            </div>

            <div class="results-section">
                <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
                <div class="response-info">
                    <div id="responseStatus" class="status"></div>
                    <div id="responseTime"></div>
                </div>
                <div class="response-area" id="responseOutput">
                    {/* –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ */}
                </div>

                <h3 style="margin-top: 1rem;">üìã –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤</h3>
                <div class="supplier-list" id="supplierList">
                    {/* –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å */}
                </div>
            </div>
        </section>
    </div>

    <script>
        // –ë–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let apiBaseUrl = document.getElementById('apiBaseUrl').value;
        let apiKey = document.getElementById('apiKey').value;

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–ª–µ–π
        document.getElementById('apiBaseUrl').addEventListener('input', function () {
            apiBaseUrl = this.value;
        });

        document.getElementById('apiKey').addEventListener('input', function () {
            apiKey = this.value;
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤
        async function makeApiRequest(endpoint, method = 'GET', data = null) {
            const startTime = performance.now();
            const url = `${apiBaseUrl}${endpoint}`;

            console.log(`Making ${method} request to: ${url}`);

            const options = {
                method: method,
                headers: {
                    'X-API-Key': apiKey,
                    'Content-Type': 'application/json'
                }
            };

            if (data && (method === 'POST' || method === 'PUT')) {
                options.body = JSON.stringify(data);
            }

            try {
                const response = await fetch(url, options);
                const endTime = performance.now();
                const responseTime = Math.round(endTime - startTime);

                let responseData;
                const responseText = await response.text();

                try {
                    responseData = responseText ? JSON.parse(responseText) : null;
                } catch (e) {
                    responseData = { error: 'Invalid JSON response', raw: responseText };
                }

                const result = {
                    status: response.status,
                    statusText: response.statusText,
                    url: url,
                    method: method,
                    data: responseData,
                    responseTime: responseTime
                };

                console.log('API Response:', result);
                return result;
            } catch (error) {
                const endTime = performance.now();
                const responseTime = Math.round(endTime - startTime);

                return {
                    status: 0,
                    statusText: 'Network Error',
                    error: error.message,
                    responseTime: responseTime
                };
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function displayResult(result, operation) {
            const responseOutput = document.getElementById('responseOutput');
            const responseStatus = document.getElementById('responseStatus');
            const responseTime = document.getElementById('responseTime');

            // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å—Ç–∞—Ç—É—Å–æ–≤
            responseStatus.className = 'status';
            responseStatus.textContent = '';

            if (result.status === 0) {
                responseStatus.className = 'status status-error';
                responseStatus.textContent = `‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${result.error}`;
            } else if (result.status >= 200 && result.status < 300) {
                responseStatus.className = 'status status-success';
                responseStatus.textContent = `‚úÖ –£—Å–ø–µ—Ö: ${result.status} ${result.statusText}`;
            } else if (result.status === 401) {
                responseStatus.className = 'status status-error';
                responseStatus.textContent = `üîê –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: ${result.status} ${result.statusText}`;
            } else if (result.status === 404) {
                responseStatus.className = 'status status-warning';
                responseStatus.textContent = `üîç –ù–µ –Ω–∞–π–¥–µ–Ω–æ: ${result.status} ${result.statusText}`;
            } else if (result.status >= 400 && result.status < 500) {
                responseStatus.className = 'status status-warning';
                responseStatus.textContent = `‚ö†Ô∏è –û—à–∏–±–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞: ${result.status} ${result.statusText}`;
            } else {
                responseStatus.className = 'status status-error';
                responseStatus.textContent = `‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: ${result.status} ${result.statusText}`;
            }

            responseTime.textContent = `–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ${result.responseTime}–º—Å`;

            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞
            let output = `–û–ø–µ—Ä–∞—Ü–∏—è: ${operation}\n`;
            output += `URL: ${result.url}\n`;
            output += `–ú–µ—Ç–æ–¥: ${result.method}\n`;
            output += `–°—Ç–∞—Ç—É—Å: ${result.status} ${result.statusText}\n`;
            output += `–í—Ä–µ–º—è: ${result.responseTime}–º—Å\n\n`;

            if (result.data) {
                output += '–î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞:\n';
                output += JSON.stringify(result.data, null, 2);
            } else if (result.error) {
                output += `–û—à–∏–±–∫–∞: ${result.error}`;
            }

            responseOutput.textContent = output;

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –µ—Å–ª–∏ —ç—Ç–æ –∑–∞–ø—Ä–æ—Å –≤—Å–µ—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
            if (operation.includes('–í—Å–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏')) {
                if (result.data && result.data.data && Array.isArray(result.data.data)) {
                    // –§–æ—Ä–º–∞—Ç: {status: "success", data: [...], count: X}
                    updateSupplierList(result.data.data);
                } else if (result.data && Array.isArray(result.data)) {
                    // –§–æ—Ä–º–∞—Ç: [...]
                    updateSupplierList(result.data);
                } else if (result.status === 200) {
                    updateSupplierList([]);
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
        function updateSupplierList(suppliers) {
            const supplierList = document.getElementById('supplierList');

            if (!suppliers || suppliers.length === 0) {
                supplierList.innerHTML = '<div class="supplier-item">–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }

            supplierList.innerHTML = suppliers.map(supplier => `
        <div class="supplier-item" onclick="fillFormFromSupplier(${supplier.id})">
            <div class="supplier-header">
                <span class="supplier-name">${supplier.company_name || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}</span>
                <span>ID: ${supplier.id}</span>
            </div>
            <div class="supplier-contact">
                <strong>–ö–æ–Ω—Ç–∞–∫—Ç:</strong> ${supplier.contact_name || '–ù–µ —É–∫–∞–∑–∞–Ω'}<br>
                <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${supplier.phone || '–ù–µ —É–∫–∞–∑–∞–Ω'}<br>
                <strong>Email:</strong> ${supplier.email || '–ù–µ —É–∫–∞–∑–∞–Ω'}
            </div>
            <div style="margin-top: 0.5rem; font-size: 0.8rem; color: #888;">
                ${supplier.created_at ? `–°–æ–∑–¥–∞–Ω: ${new Date(supplier.created_at).toLocaleString('ru-RU')}` : ''}
            </div>
        </div>
    `).join('');
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –¥–∞–Ω–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ
        async function fillFormFromSupplier(supplierId) {
            document.getElementById('supplierId').value = supplierId;

            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
            const result = await makeApiRequest(`/api/suppliers/${supplierId}`, 'GET');

            if (result.status === 200 && result.data) {
                const supplier = result.data.data || result.data;
                document.getElementById('companyName').value = supplier.company_name || '';
                document.getElementById('contactName').value = supplier.contact_name || '';
                document.getElementById('phone').value = supplier.phone || '';
                document.getElementById('email').value = supplier.email || '';

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                displayResult(result, `–ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ ID: ${supplierId}`);
            }
        }

        // CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
        async function getAllSuppliers() {
            const result = await makeApiRequest('/api/suppliers', 'GET');
            displayResult(result, '–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤');
        }

        async function getSupplier() {
            const id = document.getElementById('supplierId').value;
            if (!id) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞');
                return;
            }
            const result = await makeApiRequest(`/api/suppliers/${id}`, 'GET');
            displayResult(result, `–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ ID: ${id}`);
        }

        async function createSupplier() {
            const companyName = document.getElementById('companyName').value;
            const contactName = document.getElementById('contactName').value;

            if (!companyName || !contactName) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ');
                return;
            }

            const data = {
                company_name: companyName,
                contact_name: contactName,
                phone: document.getElementById('phone').value || null,
                email: document.getElementById('email').value || null
            };

            const result = await makeApiRequest('/api/suppliers', 'POST', data);
            displayResult(result, '–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞');

            // –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∏ –æ—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
            if (result.status >= 200 && result.status < 300) {
                getAllSuppliers();
                clearForm();
            }
        }

        async function updateSupplier() {
            const id = document.getElementById('supplierId').value;
            if (!id) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è');
                return;
            }

            const companyName = document.getElementById('companyName').value;
            const contactName = document.getElementById('contactName').value;

            if (!companyName || !contactName) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ');
                return;
            }

            const data = {
                company_name: companyName,
                contact_name: contactName,
                phone: document.getElementById('phone').value || null,
                email: document.getElementById('email').value || null
            };

            const result = await makeApiRequest(`/api/suppliers/${id}`, 'PUT', data);
            displayResult(result, `–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ ID: ${id}`);

            // –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫
            if (result.status >= 200 && result.status < 300) {
                getAllSuppliers();
            }
        }

        async function deleteSupplier() {
            const id = document.getElementById('supplierId').value;
            if (!id) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ ID –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è');
                return;
            }

            if (!confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —Å ID: ${id}?`)) {
                return;
            }

            const result = await makeApiRequest(`/api/suppliers/${id}`, 'DELETE');
            displayResult(result, `–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ ID: ${id}`);

            // –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∏ –æ—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
            if (result.status >= 200 && result.status < 300) {
                getAllSuppliers();
                clearForm();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Ñ–æ—Ä–º—ã
        function clearForm() {
            document.getElementById('companyName').value = '';
            document.getElementById('contactName').value = '';
            document.getElementById('phone').value = '';
            document.getElementById('email').value = '';
            document.getElementById('supplierId').value = '';
        }

        async function testConnection() {
            const result = await makeApiRequest('/api/suppliers', 'GET');
            if (result.status === 200) {
                alert('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API —É—Å–ø–µ—à–Ω–æ!');
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
                getAllSuppliers();
            } else {
                alert(`‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API: ${result.status} ${result.statusText}. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –∏ API –∫–ª—é—á.`);
            }
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', function () {
            console.log('Page loaded, testing connection...');
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            setTimeout(testConnection, 500);
        });

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è Enter –≤ –ø–æ–ª—è—Ö –≤–≤–æ–¥–∞
        document.addEventListener('DOMContentLoaded', function () {
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('keypress', function (e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–∑–æ–≤–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
                    }
                });
            });
        });
    </script>
</body>

</html>